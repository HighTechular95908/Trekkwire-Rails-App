<%= form_with(model: [@account], local: true) do |form| %>
  <%= render "shared/error_messages", resource: form.object %>

  <div class="form-group">
    <%= form.label :avatar %>

    <div class="flex items-center gap-4">
      <%= account_avatar form.object, class: "rounded-full" %>
      <div>
        <%= form.file_field :avatar, accept: "image/*", class: "file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-gray-50 file:text-gray-700 hover:file:bg-gray-100" %>
      </div>
    </div>
  </div>

  <div class="form-group">
    <%= form.label :name %>
    <%= form.text_field :name, placeholder: true, autofocus: true, class: "form-control" %>
  </div>

  <div class="form-group">
    <%= form.label :customer_type %>
    <%= form.select :customer_type, options_for_select(Account.customer_types.map {|key, value| [key.titleize, Account.customer_types.key(value)]}, @account.customer_type) %>
  </div>

  <div class="form-group">
    <%= form.label "Bio" %>
    <%= form.text_area :description, placeholder: "Tell everybody a bit about who you are!", class: "form-control" %>
  </div>

  <%= form.fields_for :operating_location, @account.operating_location do |f| %>
    <div data-controller="places-autocomplete">
      <div class="form-group">
        <%= f.label :address %>
        <%= f.search_field :address, placeholder: "Enter your address", class: "form-control", data: { target: "places-autocomplete.field" } %>
      </div>
      <div class="form-group">
        <%= f.label :latitude %>
        <%= f.search_field :latitude, placeholder: "lat", class: "form-control", readonly: true, data: { target: "places-autocomplete.latitude" } %>
      </div>
      <div class="form-group">
        <%= f.label :longitude %>
        <%= f.search_field :longitude, placeholder: "lon", class: "form-control", readonly: true, data: { target: "places-autocomplete.longitude" } %>
      </div>
    </div>
  <% end %>

  <% if Jumpstart::Multitenancy.domain? %>
    <div class="form-group">
      <%= form.label :domain %>
      <%= form.text_field :domain, placeholder: true, autofocus: true, class: "form-control" %>
    </div>
  <% end %>

  <% if Jumpstart::Multitenancy.subdomain? %>
    <div class="form-group">
      <%= form.label :subdomain %>
      <%= form.text_field :subdomain, placeholder: true, autofocus: true, class: "form-control" %>
    </div>
  <% end %>

  <div class="flex justify-between form-group">
    <%= form.button class: "btn btn-primary" %>

    <% if account.persisted? && !account.personal? %>
      <%= link_to t("delete"), account, class: "btn btn-danger btn-outline", data: { turbo_method: :delete, turbo_confirm: t("are_you_sure") } %>
    <% end %>
  </div>
<% end %>
